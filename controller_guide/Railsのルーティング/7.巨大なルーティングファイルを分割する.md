# 巨大なルーティングファイルを分割する

## 概要
Railsでは、ルーティング数が数千にのぼる大規模なアプリケーション向けに、`routes.rb`を複数ファイルに分割できる仕組みが用意されています。これは`draw`マクロを使って、ルーティングを整理・管理しやすくする方法です。

## このガイドの内容
1. **drawマクロによるルーティングファイルの分割方法（7.1）**
2. **サブファイルの構成と記述ルール（7.2）**
3. **分割の注意点と活用指針（7.3）**

---

## 7.1 drawマクロによるルーティングファイルの分割方法
`draw(:admin)` のように書くことで、`config/routes/admin.rb` にあるルーティングを読み込むことができます。

```ruby
# config/routes.rb
Rails.application.routes.draw do
  get "foo", to: "foo#bar"

  draw(:admin)
end
```

```ruby
# config/routes/admin.rb
namespace :admin do
  resources :comments
end
```

このように、特定の責務をもつルート（例: adminやapi）ごとにファイルを分けて記述できます。

---

## 7.2 サブファイルの構成と記述ルール
- 分割されたルーティングファイルは `Rails.application.routes.draw` で囲ってはいけません。
- 通常のルーティングDSL（`resources`や`namespace`など）はそのまま使えます。
- ファイルの場所は `config/routes/` 配下であれば、サブディレクトリ（例: `config/routes/external/admin.rb`）でも読み込めます。

---

## 7.3 分割の注意点と活用指針
- 分割は**ルーティングが数千件を超えるような場合**に限り、導入を検討すべきです。
- 多くのアプリでは、`namespace` や `scope` を使うだけで十分な整理が可能です。
- ファイルが分割されることで見通しは良くなる反面、全体の構造把握や検索が煩雑になるデメリットもあります。

---

## 補足
ルーティングファイルの分割は、読みやすさや保守性を高める手段のひとつですが、導入の判断は慎重に行いましょう。